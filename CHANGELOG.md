# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [2.1.0] - 2024-12-28

### ✨ 新增功能
- **搜索系统**
  - 新增完整的搜索功能模块
  - 支持关键词、分类、方向多维搜索
  - 智能搜索建议和热门关键词
  - 搜索结果分页和排序
  - 快速过滤功能

- **缩略图系统优化**
  - 实现Worker线程池进行高性能图片处理
  - 支持批量生成缺失缩略图
  - 自动检测和修复损坏的缩略图
  - 孤立文件清理功能

- **安全增强**
  - 智能可疑活动检测系统
  - 自动IP封禁和解封机制
  - 完善的文件上传安全验证
  - 防路径遍历攻击保护
  - SQL注入防护机制

- **邮件服务**
  - 用户注册邮箱验证
  - 密码重置邮件服务
  - 可配置的SMTP设置
  - 邮件模板系统

### 🔧 优化改进
- **性能优化**
  - 数据库查询优化，新增多个关键索引
  - API响应时间显著提升
  - 内存使用优化
  - 错误处理机制完善

- **代码质量**
  - 完善的错误处理类系统
  - 统一的API响应格式
  - 代码结构优化和重构
  - 增加详细的注释文档

### 🔒 安全修复
- 修复安全中间件重复方法名问题
- 加强JWT令牌验证机制
- 优化会话安全配置
- 完善访问控制机制

### 📚 文档更新
- 新增详细功能特性文档 (FEATURES.md)
- 更新README.md，补充新功能说明
- 完善API文档，新增搜索接口
- 更新安全配置文档

## [2.0.0] - 2025-07-27

### 🐳 Docker & Deployment
- 🔧 修复Docker构建问题，使用`npm install --omit=dev`替代`npm ci --only=production`
- 🌐 简化docker-compose网络配置，移除子网设置以避免IP冲突
- 🔒 更新默认安全配置，生成安全的SESSION_SECRET密钥
- 📂 优化Docker多阶段构建，减小镜像体积

### ⚡ Performance & Security
- 🚀 添加图片缩略图系统，支持small/medium/large三种尺寸
- 🔒 增强安全配置，添加IP黑白名单和域名访问控制
- 🛡️ 实现维护模式，支持系统维护时的访问控制
- ⚡ 优化数据库索引，提升查询性能
- 📊 添加实时统计和监控功能

### 🎯 Features
- 👨‍💼 完整后台管理系统，支持图片上传、分类、批量操作
- 👥 用户管理系统，支持注册审批和权限控制
- 🛠️ 系统设置功能，可配置注册控制、用户限制等
- 🔍 搜索功能，支持关键词、分类、方向等多维度筛选
- 📈 统计分析，提供API调用统计和用户行为分析

### 🐛 Bug Fixes
- 📝 修复注册控制表单值重置问题
- 🔥 删除热门搜索功能中的默认标签显示
- 📁 修复缩略图生成和显示问题
- 🛠️ 修复系统配置加载和保存逻辑

## [1.0.0] - 2025-07-26

### 🎉 初始版本发布
- 🚀 基础随机图片API功能
- 🖼️ 支持多种图片分类（风景、动漫、美女等）
- 📱 响应式设计，支持PC和移动端
- 🔐 用户认证系统
- 📊 基础统计功能